(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{12:function(e,t,a){},13:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var c,n,r,o=a(1),l=a.n(o),s=a(7),i=a.n(s),d=(a(12),a(3)),u=(a(13),a(5)),b=a.n(u),j=a(4),m="TOGGLE_FROM_SELECTED",p="ADD",O="UPDATE",h="DELETE",y="RESET",f="Toggle completion",x="Clear selection",g="Delete",v={PERSONAL:"personal",ACADEMIC:"academic",SOCIAL:"social"},N={LOW:"low",MEDIUM:"medium",HIGH:"high"},C="fa-user",E="fa-book",T="fa-users",w="cgreen",I="cyellow",A="cred",_=(c={},Object(j.a)(c,N.LOW,w),Object(j.a)(c,N.MEDIUM,I),Object(j.a)(c,N.HIGH,A),c),S=(n={},Object(j.a)(n,v.PERSONAL,C),Object(j.a)(n,v.ACADEMIC,E),Object(j.a)(n,v.SOCIAL,T),n),D="TITLE",F="URGENCY",k="CATEGORY",L="UPDATE_URGENCY_FILTER",V="UPDATE_CATEGORY_FILTER",U="TOGGLE_INCOMPLETE_ENABLED",M="UPDATE_SEARCH_VALUE",R=a(0),P=l.a.memo((function(e){var t=e.label,a=e.isChecked,c=e.handleChange;return Object(R.jsxs)("div",{className:"check-box-row mar8 pad8",children:[Object(R.jsx)("input",{type:"checkbox",className:"check-box mar8",checked:a,onChange:c}),Object(R.jsx)("div",{className:"normal-bold-title",children:t})]})})),G=b.a.memo((function(e){var t=e.label,a=e.urgencyFilter,c=e.handleFilterUpdate;return Object(R.jsxs)("div",{className:"filter-row top-bottom-pad8",children:[Object(R.jsx)("div",{className:"normal-bold-title right-left-pad8",children:t}),Object(R.jsx)("div",{className:"filter-btns",children:Object.entries(N).map((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(R.jsx)("button",{className:"icon-btn ".concat(a[r]?"filter-btn-selected":""),"data-type":r,onClick:c,children:Object(R.jsx)("i",{className:"fa fa-exclamation-triangle ".concat(_[r])})},n)}))})]})})),H=b.a.memo((function(e){var t=e.label,a=e.categoryFilter,c=e.handleFilterUpdate;return Object(R.jsxs)("div",{className:"filter-row top-bottom-pad8",children:[Object(R.jsx)("div",{className:"normal-bold-title right-left-pad8",children:t}),Object(R.jsx)("div",{className:"filter-btns",children:Object.entries(v).map((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(R.jsx)("button",{className:"icon-btn ".concat(a[r]?"filter-btn-selected":""),"data-type":r,onClick:c,children:Object(R.jsx)("i",{className:"fa ".concat(S[r]," cwhite")})},n)}))})]})})),z=b.a.memo((function(e){var t=e.filterState,a=e.dispatch,c=Object(u.useCallback)((function(){return a({type:U})}),[a]),n=Object(u.useCallback)((function(e){var t=e.target.closest("[data-type]");t&&a({type:L,payload:{type:t.dataset.type}})}),[a]),r=Object(u.useCallback)((function(e){var t=e.target.closest("[data-type]");t&&a({type:V,payload:{type:t.dataset.type}})}),[a]);return Object(R.jsxs)("div",{className:"card b12 pad8 top-bottom-mar8",children:[Object(R.jsx)(G,{label:"Urgency",urgencyFilter:t.urgencyFilter,handleFilterUpdate:n}),Object(R.jsx)(H,{label:"Category",categoryFilter:t.categoryFilter,handleFilterUpdate:r}),Object(R.jsx)(P,{label:"Not Completed",isChecked:t.isIncompleteEnabled,handleChange:c}),Object(R.jsx)("div",{className:"normal-bold-title top-bottom-pad8",children:"Filter Todos"})]})})),W=l.a.memo((function(e){var t=e.value,a=e.handleChange,c=e.placeholder,n=e.name,r=e.extraClasses;return Object(R.jsx)("input",{type:"text","data-name":n,className:"text-input mar8 pad12 ".concat(r||""),placeholder:c,value:t,onChange:a})})),q=function(){return Object(R.jsxs)("div",{className:"header__left b8",children:[Object(R.jsx)("div",{className:"header__left__name",children:"Todo App"}),Object(R.jsx)("div",{className:"header__left__date",children:(new Date).toDateString()})]})},J=l.a.memo((function(e){var t=e.searchValue,a=e.dispatch;return Object(R.jsxs)("div",{className:"header__right",children:[Object(R.jsx)(W,{name:"search",value:t,placeholder:"search todos",handleChange:function(e){a({type:M,payload:{newSearchValue:e.target.value}})},extraClasses:"header__right__search-input"}),Object(R.jsx)("button",{className:"green-btn mar8",onClick:function(){a({type:M,payload:{newSearchValue:""}})},children:"Clear"})]})})),Y=l.a.memo((function(e){var t=e.searchValue,a=e.dispatch;return Object(R.jsxs)("div",{className:"header b8 mar4",children:[Object(R.jsx)(q,{}),Object(R.jsx)(J,{searchValue:t,dispatch:a})]})})),B=a(2),K=l.a.memo((function(e){var t=e.name,a=e.initialValue,c=e.values,n=e.handleChange;return Object(R.jsx)("select",{"data-name":t,value:a,className:"dropdown mar8 pad12",onChange:n,children:Object.keys(c).map((function(e){return Object(R.jsx)("option",{value:c[e],children:c[e][0].toUpperCase()+c[e].slice(1)},e)}))})})),Q=function(e,t){switch(t.type){case D:return Object(B.a)(Object(B.a)({},e),{},{title:t.payload.newValue});case F:return Object(B.a)(Object(B.a)({},e),{},{urgency:t.payload.newValue});case k:return Object(B.a)(Object(B.a)({},e),{},{category:t.payload.newValue});case y:return Object(B.a)({},t.payload.initialFormData);default:return e}},X=l.a.memo((function(e){var t=e.initialFormData,a=e.handleSubmit,c=Object(o.useReducer)(Q,t),n=Object(d.a)(c,2),r=n[0],l=n[1],s=Object(o.useCallback)((function(e){l({type:e.target.dataset.name,payload:{newValue:e.target.value}})}),[]);return Object(R.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),a(r),l({type:y,payload:{initialFormData:t}})},children:[Object(R.jsx)("div",{className:"normal-bold-title mar8",children:"Title"}),Object(R.jsx)(W,{name:D,placeholder:"Add Todo Title",value:r.title,handleChange:s}),Object(R.jsx)("div",{className:"normal-bold-title mar8",children:"Urgency"}),Object(R.jsx)(K,{name:F,initialValue:r.urgency,values:N,handleChange:s}),Object(R.jsx)("div",{className:"normal-bold-title mar8",children:"Category"}),Object(R.jsx)(K,{name:k,initialValue:r.category,values:v,handleChange:s})]})})),Z={title:"",urgency:N.LOW,category:v.PERSONAL},$=l.a.memo((function(e){var t=e.onAction,a=Object(o.useCallback)((function(e){var a;""!==e.title&&t({type:p,payload:{newTodo:(a=e,{id:(new Date).valueOf(),date:(new Date).toLocaleString(),title:a.title||"",urgency:a.urgency||N.LOW,category:a.category||v.PERSONAL,completed:!1})}})}),[t]);return Object(R.jsxs)("div",{className:"card b12 pad12 top-bottom-mar8",children:[Object(R.jsx)("div",{className:"create-todo-text mar8",children:"Create Todo"}),Object(R.jsx)(X,{initialFormData:Z,handleSubmit:a})]})})),ee=l.a.memo((function(e){var t=e.totalTodos,a=e.completedTodos;console.log("Analytics");var c=0===a?0:Math.round(a/t*100);return Object(R.jsxs)("div",{className:"card b12 pad12 top-bottom-mar8",children:[Object(R.jsxs)("div",{className:"percentage-circle",children:[Object(R.jsx)("div",{className:"percetage-text",children:c+" %"}),Object(R.jsxs)("div",{className:"ratio-text",children:[a," / ",t]})]}),Object(R.jsx)("div",{className:"normal-bold-title mar8",children:"Analytics"})]})})),te=l.a.memo((function(e){var t=e.todo,a=e.isSelected,c=e.onAction;return Object(R.jsxs)("div",{className:"todo mar8 pad8 b12 ".concat(t.completed?"reduced-opacity":"original-opacity"),children:[Object(R.jsxs)("div",{className:"todo__topbar-btns",children:[Object(R.jsx)("button",{className:"icon-btn todo__topbar-btns__extra-style alter-visibility",children:Object(R.jsx)("i",{className:"fa fa-pencil cwhite"})}),Object(R.jsx)("button",{className:"icon-btn todo__topbar-btns__extra-style alter-visibility",onClick:function(){c({type:h,payload:{id:t.id}})},children:Object(R.jsx)("i",{className:"fa fa-trash cwhite"})})]}),Object(R.jsx)("div",{className:"normal-bold-title text-center mar10",style:{fontSize:"18px"},children:t.title}),Object(R.jsx)("div",{className:"normal-title mar10",style:{fontSize:"14px"},children:t.date}),Object(R.jsxs)("div",{className:"mar10",children:[Object(R.jsx)("span",{className:"todo__preferences-icon mar8",children:Object(R.jsx)("i",{className:"fa fa-exclamation-triangle ".concat(_[t.urgency])})}),Object(R.jsx)("span",{className:"todo__preferences-icon mar8",children:Object(R.jsx)("i",{className:"fa ".concat(S[t.category]," cwhite")})})]}),Object(R.jsx)("button",{className:"todo__toggle-complete-btn green-btn mar10",onClick:function(){var e=Object(B.a)(Object(B.a)({},t),{},{completed:!t.completed});c({type:O,payload:{updatedTodo:e}})},children:t.completed?"Completed Undo?":"Mark Completed"}),Object(R.jsx)("button",{className:" ".concat(a?"blue-circle":"white-circle"," mar8"),onClick:function(){c({type:m,payload:{id:t.id}})}})]})})),ae=function(e){var t=e.todos,a=e.currentlySelectedIds,c=e.onAction;return Object(R.jsx)("div",{className:"col2 b8 pad8",children:t.map((function(e){var t=-1!==a.indexOf(e.id);return Object(R.jsx)(te,{todo:e,isSelected:t,onAction:c},e.id)}))})},ce=function(e){var t=e.label,a=e.iconClass;return Object(R.jsxs)("div",{className:"top-bottom-mar8",style:{display:"flex",alignItems:"center"},children:[Object(R.jsx)("button",{className:"icon-btn expand",children:Object(R.jsx)("div",{className:"fa ".concat(a," cwhite")})}),Object(R.jsx)("div",{className:"hidden-label",children:t})]})},ne=l.a.memo((function(){return Object(R.jsxs)("div",{className:"selection-btns fixed",children:[Object(R.jsx)(ce,{label:f,iconClass:"fa-check-square"}),Object(R.jsx)(ce,{label:x,iconClass:"fa-square-o"}),Object(R.jsx)(ce,{label:g,iconClass:"fa-minus-square"})]})})),re=function(e){var t=document.querySelector("[data-id=snackbar]");t.textContent=e,t.classList.add("show");var a=r=setTimeout((function(){a===r&&t.classList.toggle("show")}),3e3)},oe=function(){var e=[],t=function(t){return e.findIndex((function(e){return e.ID===t}))},a=function(){return Math.random()<=.98};return{getTodosFromDatabase:function(){return new Promise((function(t,a){var c=JSON.parse(localStorage.getItem("todos")),n=[];c&&(e=[],c.forEach((function(t){e=e.concat(t),n.push(Object(B.a)({},t))}))),t(n)}))},storeTodosToDatabase:function(){return new Promise((function(t,a){localStorage.setItem("todos",JSON.stringify(e)),t()}))},createTodoInDatabase:function(t){return new Promise((function(c,n){a()?((Array.isArray(t)?t:[t]).forEach((function(t){return e=e.concat(Object(B.a)({},t))})),c()):n("Opps!! something went wrong server side, plz try again after sometime")}))},updateTodoInDatabase:function(c,n){return new Promise((function(r,o){if(a()){var l=Array.isArray(c)?c:[c],s=Array.isArray(n)?n:[n];l.forEach((function(a,c){var n=t(a);e=e.slice(0,n).concat(Object(B.a)({},s[c]),e.slice(n+1))})),r()}else o("Opps!! Cannot update right now, plz try again after sometime")}))},deleteTodoFromDatabase:function(c){return new Promise((function(n,r){a()?((Array.isArray(c)?c:[c]).forEach((function(a){var c=t(a);e=e.slice(0,c).concat(e.slice(c+1))})),n()):r("Opps!! something went wrong while deleting TODO, plz try again after sometime")}))}}}(),le={todos:[],currentlySelectedIds:[]},se=function(e,t){return e.findIndex((function(e){return e.id===t}))},ie=function(e,t){var a;switch(t.type){case p:return Object(B.a)(Object(B.a)({},e),{},{todos:e.todos.concat(t.payload.newTodo)});case O:return a=se(e.todos,t.payload.updatedTodo.id),Object(B.a)(Object(B.a)({},e),{},{todos:e.todos.slice(0,a).concat(t.payload.updatedTodo,e.todos.slice(a+1))});case h:return console.log("in delete"),a=se(e.todos,t.payload.id),console.log(a),Object(B.a)(Object(B.a)({},e),{},{todos:e.todos.slice(0,a).concat(e.todos.slice(a+1))});case m:return-1===(a=e.currentlySelectedIds.indexOf(t.payload.id))?Object(B.a)(Object(B.a)({},e),{},{currentlySelectedIds:e.currentlySelectedIds.concat(t.payload.id)}):Object(B.a)(Object(B.a)({},e),{},{currentlySelectedIds:e.currentlySelectedIds.slice(0,a).concat(e.currentlySelectedIds.slice(a+1))});default:return e}},de={urgencyFilter:{},categoryFilter:{},isIncompleteEnabled:!1,searchValue:""},ue=function(e,t){switch(t.type){case L:var a=Object(B.a)({},e.urgencyFilter);return a[t.payload.type]=!a[t.payload.type],Object(B.a)(Object(B.a)({},e),{},{urgencyFilter:a});case V:var c=Object(B.a)({},e.categoryFilter);return c[t.payload.type]=!c[t.payload.type],Object(B.a)(Object(B.a)({},e),{},{categoryFilter:c});case U:return Object(B.a)(Object(B.a)({},e),{},{isIncompleteEnabled:!e.isIncompleteEnabled});case M:return Object(B.a)(Object(B.a)({},e),{},{searchValue:t.payload.newSearchValue});default:return e}},be=function(){var e=function(){var e=Object(o.useReducer)(ie,le),t=Object(d.a)(e,2),a=t[0],c=t[1],n=Object(o.useCallback)((function(e){oe.createTodoInDatabase(e).then((function(){c({type:p,payload:{newTodo:e}})})).catch(re)}),[]),r=Object(o.useCallback)((function(e){oe.updateTodoInDatabase(e.ID,e).then((function(){c({type:O,payload:{updatedTodo:e}})})).catch(re)}),[]),l=Object(o.useCallback)((function(e){oe.deleteTodoFromDatabase(e).then((function(){c({type:h,payload:{id:e}})})).catch(re)}),[]);return[a,Object(o.useCallback)((function(e){var t=e.type,a=e.payload;switch(t){case p:n(a.newTodo);break;case O:r(a.updatedTodo);break;case h:l(a.id);break;case m:c({type:t,payload:a})}}),[n,r,l])]}(),t=Object(d.a)(e,2),a=t[0],c=t[1],n=function(){var e=Object(o.useReducer)(ue,de),t=Object(d.a)(e,2);return[t[0],t[1]]}(),r=Object(d.a)(n,2),l=r[0],s=r[1],i=a.todos.filter((function(e){return function(e,t){var a=!(t.urgencyFilter[N.LOW]||t.urgencyFilter[N.MEDIUM]||t.urgencyFilter[N.HIGH]),c=!(t.categoryFilter[v.PERSONAL]||t.categoryFilter[v.ACADEMIC]||t.categoryFilter[v.SOCIAL]),n=t.isIncompleteEnabled,r=""===t.searchValue||e.title.toLowerCase().indexOf(t.searchValue)+1;return(t.urgencyFilter[e.urgency]||a)&&(t.categoryFilter[e.category]||c)&&(n&&!e.completed||!n)&&r}(e,l)})),u=Object(o.useMemo)((function(){return i.length}),[i.length]),b=Object(o.useMemo)((function(){return i.filter((function(e){return e.completed})).length}),[i]);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(Y,{searchValue:l.searchValue,dispatch:s}),Object(R.jsxs)("div",{className:"todo-app-body mar4",children:[Object(R.jsxs)("div",{className:"col1 b8 pad8",children:[Object(R.jsx)(z,{filterState:l,dispatch:s}),Object(R.jsx)($,{onAction:c}),Object(R.jsx)(ee,{totalTodos:u,completedTodos:b})]}),Object(R.jsx)(ae,{todos:i,currentlySelectedIds:a.currentlySelectedIds,onAction:c})]}),Object(R.jsx)(ne,{}),Object(R.jsx)("div",{className:"snackbar","data-id":"snackbar"})]})};i.a.render(Object(R.jsx)(l.a.StrictMode,{children:Object(R.jsx)(be,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.a33b3e53.chunk.js.map